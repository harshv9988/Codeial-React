(this["webpackJsonpcodeial-react"]=this["webpackJsonpcodeial-react"]||[]).push([[0],{104:function(e,t){},109:function(e,t,n){},110:function(e,t,n){"use strict";n.r(t);var s=n(0),a=n(1),c=n.n(a),r=n(26),i=n.n(r),o=n(4),d=(n(70),n(6)),l=n(7),u=n(9),h=n(8),j=n(2),m=n(5),p=n(10),b=n(57),f="UPDATE_POSTS",O="ADD_POST",v="ADD_COMMENT",g="LOGIN_START",x="LOGIN_SUCCESS",C="LOGIN_FAIL",N="SIGNUP_START",S="SIGNUP_SUCCESS",w="SIGNUP_FAIL",y="AUTHENTICATE_USER",k="SIGNOUT_USER",I="CLEAR_ERROR_MSG",_="EDIT_USER_SUCCESSFUL",E="EDIT_USER_FAILED",P="USER_PROFILE_SUCCESS",L="USER_PROFILE_FAILURE",T="FETCH_USER_PROFILE",A="FETCH_FRIENDS_SUCCESS",R="ADD_FRIEND",U="REMOVE_FRIEND",F="UPDATE_POST_LIKE",D="UPDATE_COMMENT_LIKE",M="FETCH_SEARCH_RESULTS_SUCCESS",B="http://codeial.codingninjas.com:8000/api/v2/",z=function(){return"".concat(B,"/users/login")},G=function(){return"".concat(B,"/users/signup")},H=function(){return"".concat(B,"/users/edit")},q=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:10;return"".concat(B,"/posts?page=").concat(e,"&limit=").concat(t)},K=function(e){return"".concat(B,"/users/").concat(e)},W=function(){return"".concat(B,"/friendship/fetch_user_friends")},J=function(e){return"".concat(B,"/friendship/create_friendship?user_id=").concat(e)},V=function(e){return"".concat(B,"/friendship/remove_friendship?user_id=").concat(e)},Y=function(){return"".concat(B,"/posts/create")},Q=function(){return"".concat(B,"/comments/")},X=function(e,t){return"".concat(B,"/likes/toggle?likeable_id=").concat(e,"&likeable_type=").concat(t)},Z=function(e){return"".concat(B,"/users/search?text=").concat(e)};function $(e){var t=[];for(var n in e){var s=encodeURIComponent(n),a=encodeURIComponent(e[n]);t.push(s+"="+a)}return t.join("&")}function ee(){return localStorage.getItem("token")}function te(){return function(e){var t=q();fetch(t).then((function(e){return e.json()})).then((function(t){var n;e((n=t.data.posts,{type:f,posts:n}))}))}}function ne(e){return function(t){var n=Y();fetch(n,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(ee())},body:$({content:e})}).then((function(e){return e.json()})).then((function(e){var n;console.log("dATA",e),e.success&&t((n=e.data.post,{type:O,post:n}))}))}}function se(e,t){return function(n){var s=Q();fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(ee())},body:$({content:e,post_id:t})}).then((function(e){return e.json()})).then((function(e){e.success&&n(function(e,t){return{type:v,comment:e,postId:t}}(e.data.comment,t))}))}}function ae(e,t,n){return function(s){var a=X(e,t);fetch(a,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(ee())}}).then((function(e){return e.json()})).then((function(a){console.log("LIKE DATA",a),a.success&&s("Post"===t?function(e,t){return{type:F,postId:e,userId:t}}(e,n):function(e,t){return{type:D,commentId:e,userId:t}}(e,n))}))}}var ce=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.posts,n=e.isLoggedIn;return Object(s.jsxs)("div",{className:"posts-list",children:[n&&Object(s.jsx)(Pe,{}),t.map((function(e){return Object(s.jsx)(Ae,{post:e},e._id)}))]})}}]),n}(a.Component);function re(e,t){return function(n){var s=z();n({type:g}),fetch(s,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:$({email:e,password:t})}).then((function(e){return e.json()})).then((function(e){if(console.log("data",e),e.success)return localStorage.setItem("token",e.data.token),void n((t=e.data.user,{type:x,user:t}));var t,s;n((s=e.message,{type:C,error:s}))}))}}function ie(e,t,n,s){return function(a){var c=G();a({type:N}),fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:$({name:e,email:t,password:n,confirm_password:s})}).then((function(e){return e.json()})).then((function(e){if(console.log("signup-data",e),e.success)return localStorage.setItem("token",e.data.token),void a((t=e.data.user,{type:S,user:t}));var t,n;a((n=e.message,{type:w,error:n}))}))}}function oe(){return{type:I}}function de(e,t,n,s){return function(a){var c=H();fetch(c,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(ee())},body:$({name:e,password:t,confirm_password:n,id:s})}).then((function(e){return e.json()})).then((function(e){if(console.log("edit-profile-data",e),e.success)return a((t=e.data.user,{type:_,user:t})),void(e.data.token&&localStorage.setItem("token",e.data.token));var t,n;a((n=e.message,{type:E,error:n}))}))}}function le(e){return{type:M,users:e}}var ue=Object(o.b)((function(e){return{auth:e.auth,results:e.search.results}}))((function(e){var t=e.auth,n=e.results;return Object(s.jsxs)("nav",{className:"nav",children:[Object(s.jsx)("div",{className:"left-div",children:Object(s.jsx)(p.b,{to:"/",children:Object(s.jsx)("img",{src:"https://ninjasfiles.s3.amazonaws.com/0000000000003454.png",alt:"logo"})})}),Object(s.jsxs)("div",{className:"search-container",children:[Object(s.jsx)("img",{className:"search-icon",src:"https://image.flaticon.com/icons/svg/483/483356.svg",alt:"search-icon"}),Object(s.jsx)("input",{placeholder:"Search",onChange:function(t){var n=t.target.value;e.dispatch(function(e){return function(t){var n=Z(e);fetch(n,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(ee())}}).then((function(e){return e.json()})).then((function(e){console.log("SEARCH data",e),e.success?t(le(e.data.users)):t(le([]))}))}}(n))}}),n.length>0&&Object(s.jsx)("div",{className:"search-results",children:Object(s.jsx)("ul",{children:n.map((function(e){return Object(s.jsx)("li",{className:"search-results-row",children:Object(s.jsxs)(p.b,{to:"/user/".concat(e._id),children:[Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp"}),Object(s.jsx)("span",{children:e.name})]})},e._id)}))})})]}),Object(s.jsxs)("div",{className:"right-nav",children:[t.isLoggedIn&&Object(s.jsxs)("div",{className:"user",children:[Object(s.jsx)(p.b,{to:"/settings",children:Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp",id:"user-dp"})}),Object(s.jsx)("span",{children:t.user.name})]}),Object(s.jsx)("div",{className:"nav-links",children:Object(s.jsxs)("ul",{children:[!t.isLoggedIn&&Object(s.jsx)("li",{children:Object(s.jsx)(p.b,{to:"/login",children:"Log in"})}),t.isLoggedIn&&Object(s.jsx)("li",{onClick:function(){localStorage.removeItem("token"),e.dispatch({type:k})},children:"Log out"}),!t.isLoggedIn&&Object(s.jsx)("li",{children:Object(s.jsx)(p.b,{to:"/signup",children:"Register"})})]})})]})]})}));function he(e){return function(t){var n=W(e);fetch(n,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(ee())}}).then((function(e){return e.json()})).then((function(e){var n;t((n=e.data.friends,{type:A,friends:n}))}))}}var je=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){localStorage.getItem("token")&&this.props.dispatch(he())}},{key:"render",value:function(){var e=this.props,t=e.posts,n=e.isLoggedIn,a=e.friends;return Object(s.jsxs)("div",{className:"home",children:[Object(s.jsx)(ce,{posts:t,isLoggedIn:n}),n&&Object(s.jsx)(Ie,{friends:a}),n&&Object(s.jsx)(Be,{})]})}}]),n}(a.Component);function me(){return Object(s.jsx)("div",{children:"Nothing Here...."})}var pe=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).handleemailChange=function(e){s.setState({email:e.target.value})},s.handlePasswordChange=function(e){s.setState({password:e.target.value})},s.handleFormSubmit=function(e){e.preventDefault();var t=s.state,n=t.email,a=t.password;n&&a&&s.props.dispatch(re(n,a))},s.state={email:"",password:""},s}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.props.dispatch(oe())}},{key:"render",value:function(){var e=this.props.auth,t=e.error,n=e.isProgress,a=e.isLoggedIn,c=(this.props.location.state||{from:{pathname:"/"}}).from;return a?Object(s.jsx)(m.a,{to:c}):Object(s.jsxs)("form",{className:"login-form",children:[Object(s.jsx)("span",{className:"login-signup-header",children:"Log In"}),t&&Object(s.jsx)("div",{className:"alert error-dailog",children:t}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{type:"email",placeholder:"Email",onChange:this.handleemailChange,required:!0})}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{type:"password",placeholder:"Password",onChange:this.handlePasswordChange,required:!0})}),Object(s.jsx)("div",{className:"field",children:n?Object(s.jsx)("button",{onClick:this.handleFormSubmit,disabled:n,children:"Logging In..."}):Object(s.jsx)("button",{onClick:this.handleFormSubmit,disabled:n,children:"Log In"})})]})}}]),n}(a.Component);var be=Object(o.b)((function(e){return{auth:e.auth}}))(pe),fe=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).handleNameChange=function(e){s.setState({name:e.target.value})},s.handleEmailChange=function(e){s.setState({email:e.target.value})},s.handlePasswordChange=function(e){s.setState({password:e.target.value})},s.handleConfirmPasswordChange=function(e){s.setState({confirm_password:e.target.value})},s.handleFormSubmit=function(e){e.preventDefault();var t=s.state,n=t.name,a=t.email,c=t.password,r=t.confirm_password;n&&a&&c&&r&&s.props.dispatch(ie(n,a,c,r))},s.state={email:"",password:"",name:"",confirm_password:""},s}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.props.dispatch(oe())}},{key:"render",value:function(){var e=this.props.auth,t=e.error,n=e.isProgress;return e.isLoggedIn?Object(s.jsx)(m.a,{to:"/"}):Object(s.jsxs)("form",{className:"login-form",children:[Object(s.jsx)("span",{className:"login-signup-header",children:"Register"}),t&&Object(s.jsx)("div",{className:"alert error-dailog",children:t}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{type:"text",placeholder:"Name",onChange:this.handleNameChange,required:!0})}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{type:"email",placeholder:"Email",onChange:this.handleEmailChange,required:!0})}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{type:"password",placeholder:"Password",onChange:this.handlePasswordChange,required:!0})}),Object(s.jsx)("div",{className:"field",children:Object(s.jsx)("input",{type:"password",placeholder:"Confirm Password",onChange:this.handleConfirmPasswordChange,required:!0})}),Object(s.jsx)("div",{className:"field",children:n?Object(s.jsx)("button",{onClick:this.handleFormSubmit,disabled:n,children:"Creating Your Space..."}):Object(s.jsx)("button",{onClick:this.handleFormSubmit,disabled:n,children:"Sign Up"})})]})}}]),n}(a.Component);var Oe=Object(o.b)((function(e){return{auth:e.auth}}))(fe),ve=n(29),ge=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).handleChange=function(e,t){s.setState(Object(ve.a)({},e,t))},s.handleSave=function(){var e=s.state,t=e.name,n=e.password,a=e.confirmPassword,c=s.props.auth.user;s.props.dispatch(de(t,n,a,c._id))},s.state={name:e.auth.user.name,password:"",confirmPassword:"",editMode:!1},s}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.props.dispatch(oe())}},{key:"render",value:function(){var e=this,t=this.props.auth,n=t.user,a=t.error,c=this.state.editMode;return Object(s.jsxs)("div",{className:"settings",children:[Object(s.jsx)("div",{className:"img-container",children:Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp"})}),a&&Object(s.jsx)("div",{className:"alert error-dailog",children:a}),!1===a&&Object(s.jsx)("div",{className:"alert success-dailog",children:"Details updated Successfully"}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("div",{className:"field-label",children:"Email"}),Object(s.jsx)("div",{className:"field-value",children:n.email})]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("div",{className:"field-label",children:"name"}),c?Object(s.jsx)("input",{type:"text",onChange:function(t){return e.handleChange("name",t.target.value)},value:this.state.name}):Object(s.jsx)("div",{className:"field-value",children:n.name})]}),c&&Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("div",{className:"field-label",children:"New password"}),Object(s.jsx)("input",{type:"password",onChange:function(t){return e.handleChange("password",t.target.value)},value:this.state.password})]}),c&&Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("div",{className:"field-label",children:"Confirm password"}),Object(s.jsx)("input",{type:"password",onChange:function(t){return e.handleChange("confirmPassword",t.target.value)},value:this.state.confirmPassword})]}),Object(s.jsxs)("div",{className:"btn-grp",children:[c?Object(s.jsx)("button",{className:"button save-btn",onClick:this.handleSave,children:"Save"}):Object(s.jsx)("button",{className:"button edit-btn",onClick:function(){return e.handleChange("editMode",!0)},children:"Edit profile"}),c&&Object(s.jsx)("div",{className:"go-back",onClick:function(){return e.handleChange("editMode",!1)},children:"Go back"})]})]})}}]),n}(a.Component);var xe=Object(o.b)((function(e){return{auth:e.auth}}))(ge),Ce=n(20),Ne=n.n(Ce),Se=n(42);function we(e){return function(t){t({type:T});var n=K(e);fetch(n,{headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(ee())}}).then((function(e){return e.json()})).then((function(e){var n,s;e.success?t((n=e.data.user,{type:P,user:n})):t((s=e.message,{type:L,error:s}))}))}}var ye=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).handleAddFriendClick=Object(Se.a)(Ne.a.mark((function e(){var t,n,a,c,r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.props.match.params.userId,n=J(t),a={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(ee())}},e.next=5,fetch(n,a);case 5:return c=e.sent,e.next=8,c.json();case 8:(r=e.sent).success?(s.setState({success:!0,successMessage:"Friend added Successfully"}),s.props.dispatch((i=r.data.friendship,{type:R,friend:i}))):s.setState({success:null,error:r.message});case 10:case"end":return e.stop()}var i}),e)}))),s.handleRemoveFriendClick=Object(Se.a)(Ne.a.mark((function e(){var t,n,a,c,r;return Ne.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.props.match,n=V(t.params.userId),a={method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded",Authorization:"Bearer ".concat(ee())}},e.next=5,fetch(n,a);case 5:return c=e.sent,e.next=8,c.json();case 8:r=e.sent,console.log("await data",r),r.success?(s.setState({success:!0,successMessage:"Removed friends successfully!"}),s.props.dispatch((i=t.params.userId,{type:U,userId:i}))):s.setState({success:null,error:r.message});case 11:case"end":return e.stop()}var i}),e)}))),s.isuserFriend=function(){var e=s.props,t=e.match,n=e.friends,a=t.params.userId;return-1!==n.map((function(e){return e.to_user._id})).indexOf(a)},s.state={success:null,error:null,successMessage:null},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match;e.params.userId&&this.props.dispatch(we(e.params.userId))}},{key:"componentDidUpdate",value:function(e){var t=e.match.params,n=this.props.match.params;t&&n&&t.userId!==n.userId&&this.props.dispatch(we(n.userId))}},{key:"render",value:function(){this.props.match.params;var e=this.props.profile,t=this.isuserFriend(),n=this.state,a=n.success,c=n.error,r=n.successMessage;return e.inProgress?Object(s.jsx)("h1",{children:"Loading....."}):Object(s.jsxs)("div",{className:"settings",children:[Object(s.jsx)("div",{className:"img-container",children:Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-dp"})}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("div",{className:"field-label",children:"Name"}),Object(s.jsx)("div",{className:"field-value",children:e.user.name})]}),Object(s.jsxs)("div",{className:"field",children:[Object(s.jsx)("div",{className:"field-label",children:"Email"}),Object(s.jsx)("div",{className:"field-value",children:e.user.email})]}),t?Object(s.jsx)("div",{className:"btn-grp",children:Object(s.jsx)("button",{className:"button save-btn",onClick:this.handleRemoveFriendClick,children:"Remove Friend"})}):Object(s.jsx)("div",{className:"btn-grp",children:Object(s.jsx)("button",{className:"button save-btn",onClick:this.handleAddFriendClick,children:"Add Friend"})}),a&&Object(s.jsx)("div",{className:"alert success-dailog",children:r}),c&&Object(s.jsx)("div",{className:"alert error-dailog",children:c})]})}}]),n}(a.Component);var ke=Object(o.b)((function(e){return{profile:e.profile,friends:e.friends}}))(ye),Ie=function(e){return Object(s.jsxs)("div",{className:"friends-list",children:[Object(s.jsx)("div",{className:"header",children:"Friends"}),e.friends&&0===e.friends.length&&Object(s.jsx)("div",{className:"no-friends",children:"No friends found!"}),e.friends&&e.friends.map((function(e){return Object(s.jsx)(_e,{friend:e.to_user},e._id)}))]})};var _e=function(e){return Object(s.jsx)("div",{children:Object(s.jsxs)(p.b,{className:"friends-item",to:"user/".concat(e.friend._id),children:[Object(s.jsx)("div",{className:"friends-img",children:Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-pic"})}),Object(s.jsx)("div",{className:"friends-name",children:e.friend.email})]})})},Ee=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).handleOnClick=function(){var e=s.state.content;s.props.dispatch(ne(e))},s.handleChange=function(e){s.setState({content:e.target.value})},s.state={content:""},s}return Object(l.a)(n,[{key:"render",value:function(){return Object(s.jsxs)("div",{className:"create-post",children:[Object(s.jsx)("textarea",{className:"add-post",value:this.state.content,onChange:this.handleChange}),Object(s.jsx)("div",{children:Object(s.jsx)("button",{id:"add-post-btn",onClick:this.handleOnClick,children:"Add Post"})})]})}}]),n}(a.Component),Pe=Object(o.b)()(Ee);var Le=Object(o.b)((function(e){return{user:e.auth.user}}))((function(e){var t=e.user,n=e.comment,a=n.likes.includes(t._id);return Object(s.jsxs)("div",{className:"post-comment-item",children:[Object(s.jsxs)("div",{className:"post-comment-header",children:[Object(s.jsx)("span",{className:"post-comment-author",children:n.user.name}),Object(s.jsx)("span",{onClick:function(){var t=e.comment,n=e.user;e.dispatch(ae(t._id,"Comment",n._id))},className:"post-comment-time",children:a?Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/1076/1076984.svg",alt:"like post"}):Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/1077/1077035.svg",alt:"likes-icon"})}),Object(s.jsxs)("span",{className:"post-comment-likes",children:[n.likes.length," likes"]})]}),Object(s.jsx)("div",{className:"post-comment-content",children:n.content})]})})),Te=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).handleAddComment=function(e){var t=s.state.comment,n=s.props.post;"Enter"===e.key&&(s.props.dispatch(se(t,n._id)),s.setState({comment:""}))},s.handleOnCommentChange=function(e){s.setState({comment:e.target.value})},s.handlePostLike=function(){var e=s.props,t=e.post,n=e.user;s.props.dispatch(ae(t._id,"Post",n._id))},s.state={comment:""},s}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.post,n=e.user,a=this.state.comment,c=t.likes.includes(n._id);return Object(s.jsx)("div",{className:"post-wrapper",children:Object(s.jsxs)("div",{className:"post-header",children:[Object(s.jsxs)("div",{className:"post-avatar",children:[Object(s.jsx)(p.b,{to:"/user/".concat(t.user._id),children:Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/2154/2154651.svg",alt:"user-pic"})}),Object(s.jsxs)("div",{children:[Object(s.jsx)("span",{className:"post-author",children:t.user.name}),Object(s.jsx)("span",{className:"post-time",children:"a minute ago"})]})]}),Object(s.jsx)("div",{className:"post-content",children:t.content}),Object(s.jsxs)("div",{className:"post-actions",children:[Object(s.jsxs)("button",{className:"post-like no-btn",onClick:this.handlePostLike,children:[c?Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/1076/1076984.svg",alt:"like post"}):Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/1077/1077035.svg",alt:"likes-icon"}),Object(s.jsx)("span",{children:t.likes.length})]}),Object(s.jsxs)("div",{className:"post-comments-icon",children:[Object(s.jsx)("img",{src:"https://image.flaticon.com/icons/svg/1380/1380338.svg",alt:"comments-icon"}),Object(s.jsx)("span",{children:t.comments.length})]})]}),Object(s.jsx)("div",{className:"post-comment-box",children:Object(s.jsx)("input",{placeholder:"Start typing a comment",onChange:this.handleOnCommentChange,onKeyPress:this.handleAddComment,value:a})}),Object(s.jsx)("div",{className:"post-comments-list",children:t.comments.map((function(e){return Object(s.jsx)(Le,{comment:e,postId:t._id},e._id)}))})]})},t._id)}}]),n}(a.Component);var Ae=Object(o.b)((function(e){return{user:e.auth.user}}))(Te),Re=n(15),Ue=n(28),Fe=n(58),De=n.n(Fe),Me=(n(109),function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(e){var s;return Object(d.a)(this,n),(s=t.call(this,e)).setupConnections=function(){var e=s.socket,t=Object(Ue.a)(s);console.log(s.socket),e.on("connect",(function(){console.log("CONNECTION ESTABLISHED"),e.emit("join_room",{user_email:t.userEmail,chatroom:"codeial"}),e.on("user_joined",(function(e){console.log("NEW USER JOINED",e)}))})),s.socket.on("receive_message",(function(e){var n=t.state.messages,s={};s.content=e.message,e.user_email===t.userEmail?s.check=!0:s.check=!1,t.setState({messages:[].concat(Object(Re.a)(n),[s]),typedMessage:""})}))},s.handleSubmit=function(){var e=s.state.typedMessage;e&&s.userEmail&&s.socket.emit("send_message",{message:e,user_email:s.userEmail,chatroom:"codeial"})},s.state={messages:[],typedMessage:""},s.socket=De.a.connect("http://54.237.158.65:5000"),s.userEmail=e.user.email,s.userEmail&&(console.log("email",s.userEmail),s.setupConnections()),s}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.state,n=t.typedMessage,a=t.messages;return Object(s.jsxs)("div",{className:"chat-container",children:[Object(s.jsx)("div",{className:"chat-header",children:"Chat"}),Object(s.jsx)("div",{className:"chat-messages",children:a.map((function(e){return Object(s.jsx)("div",{className:e.check?"chat-bubble self-chat":"chat-bubble other-chat",children:e.content})}))}),Object(s.jsxs)("div",{className:"chat-footer",children:[Object(s.jsx)("input",{type:"text",value:n,onChange:function(t){return e.setState({typedMessage:t.target.value})}}),Object(s.jsx)("button",{onClick:this.handleSubmit,children:"Submit"})]})]})}}]),n}(a.Component));var Be=Object(o.b)((function(e){return{user:e.auth.user}}))(Me),ze=function(e){var t=e.path,n=e.isLoggedIn,a=e.component;return Object(s.jsx)(m.b,{path:t,render:function(e){return n?Object(s.jsx)(a,Object(j.a)({},e)):Object(s.jsx)(m.a,{to:{pathname:"/login",state:{from:e.location}}})}})},Ge=function(e){Object(u.a)(n,e);var t=Object(h.a)(n);function n(){return Object(d.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(te());var e=localStorage.getItem("token");if(e){var t=Object(b.a)(e);console.log("answer",t),this.props.dispatch(function(e){return{type:y,user:e}}({email:t.email,name:t.name,_id:t._id}))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.posts,a=t.auth,c=t.friends;return Object(s.jsx)(p.a,{children:Object(s.jsxs)("div",{children:[Object(s.jsx)(ue,{}),Object(s.jsxs)(m.d,{children:[Object(s.jsx)(m.b,{exact:!0,path:"/",render:function(t){return Object(s.jsx)(je,Object(j.a)(Object(j.a)({},t),{},{posts:n,friends:c,isLoggedIn:a.isLoggedIn,dispatch:e.props.dispatch}))}}),Object(s.jsx)(m.b,{path:"/login",component:be}),Object(s.jsx)(m.b,{path:"/signup",component:Oe}),Object(s.jsx)(ze,{path:"/settings",component:xe,isLoggedIn:a.isLoggedIn}),Object(s.jsx)(ze,{path:"/user/:userId",component:ke,isLoggedIn:a.isLoggedIn}),Object(s.jsx)(m.b,{component:me})]})]})})}}]),n}(c.a.Component);var He=Object(o.b)((function(e){return{posts:e.posts,auth:e.auth,friends:e.friends}}))(Ge),qe=n(16),Ke=n(59),We=n(60),Je=n.n(We);var Ve={user:{},error:null,isLoggedIn:!1,inProgress:!1};var Ye={user:{},error:null,success:null,inProgress:!1};var Qe=[];var Xe={results:[]};var Ze=Object(qe.c)({posts:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;switch(t.type){case f:return t.posts;case O:return[t.post].concat(Object(Re.a)(e));case v:var n=e.map((function(e){return e._id===t.postId?Object(j.a)(Object(j.a)({},e),{},{comments:[t.comment].concat(Object(Re.a)(e.comments))}):e}));return n;case F:var s=e.map((function(e){return e._id===t.postId?Object(j.a)(Object(j.a)({},e),{},{likes:[t.userId].concat(Object(Re.a)(e.likes))}):e}));return s;case D:var a=e.map((function(e){var n=e.comments.map((function(e){return e._id===t.commentId?Object(j.a)(Object(j.a)({},e),{},{likes:[t.userId].concat(Object(Re.a)(e.likes))}):e}));return Object(j.a)(Object(j.a)({},e),{},{comments:n})}));return a;default:return e}},auth:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ve,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case I:return Object(j.a)(Object(j.a)({},e),{},{error:null});case N:case g:return Object(j.a)(Object(j.a)({},e),{},{isProgress:!0});case S:case x:return Object(j.a)(Object(j.a)({},e),{},{user:t.user,isLoggedIn:!0,isProgress:!1,error:null});case w:case C:return Object(j.a)(Object(j.a)({},e),{},{isProgress:!1,error:t.error});case y:return Object(j.a)(Object(j.a)({},e),{},{user:t.user,isLoggedIn:!0});case k:return Object(j.a)(Object(j.a)({},e),{},{user:{},isLoggedIn:!1});case _:return Object(j.a)(Object(j.a)({},e),{},{user:t.user,error:!1});case E:return{error:t.message};default:return e}},profile:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ye,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case P:return Object(j.a)(Object(j.a)({},e),{},{success:!0,user:t.user,inProgress:!1});case L:return Object(j.a)(Object(j.a)({},e),{},{error:t.error,inProgress:!1});case T:return Object(j.a)(Object(j.a)({},e),{},{inProgress:!0});default:return e}},friends:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Qe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case A:return Object(Re.a)(t.friends);case R:return[t.friend].concat(Object(Re.a)(e));case U:return e.filter((function(e){return e.to_user._id!==t.userId}));default:return e}},search:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case M:return Object(j.a)(Object(j.a)({},e),{},{results:t.users});default:return e}}});var $e=Object(qe.d)(Ze,Object(qe.a)(Ke.a,Je.a));i.a.render(Object(s.jsx)(o.a,{store:$e,children:Object(s.jsx)(c.a.StrictMode,{children:Object(s.jsx)(He,{})})}),document.getElementById("root"))},70:function(e,t,n){}},[[110,1,2]]]);
//# sourceMappingURL=main.6876dcd3.chunk.js.map